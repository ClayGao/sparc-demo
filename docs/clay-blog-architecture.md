# Clay個人部落格系統架構設計

## 1. 系統概述

Clay個人部落格是一個基於Next.js 15的現代化個人網站，專為內容創作者設計。本系統利用Next.js的App Router架構，結合MDX實現內容與互動組件的融合，提供流暢的用戶體驗與極佳的內容展示效果。

### 1.1 核心目標

- 簡潔優雅的用戶界面，突顯內容而非界面元素
- 流暢的響應式設計，適配所有常見裝置
- 高性能頁面載入與渲染
- 內容與設計分離，便於非技術人員維護內容
- 支持豐富的內容表達方式，包括各類媒體和互動元素

## 2. 技術堆疊

| 領域 | 技術選擇 |
|------|---------|
| 前端框架 | Next.js 15 (App Router) |
| UI框架 | Tailwind CSS 4 |
| 內容管理 | MDX + 靜態檔案系統 |
| 組件庫 | 自定義組件系統 |
| 測試框架 | Jest + React Testing Library |
| 部署平台 | Vercel / Netlify |

## 3. 系統架構

### 3.1 核心架構圖

```
+---------------------------+
|       Next.js App         |
+---------------------------+
|                           |
|    +---------------+      |
|    |  頁面路由層   |      |
|    +-------+-------+      |
|            |              |
|    +-------v-------+      |
|    |  組件系統層   |      |
|    +-------+-------+      |
|            |              |
|    +-------v-------+      |
|    |  內容管理層   |      |
|    +-------+-------+      |
|            |              |
|    +-------v-------+      |
|    |   數據層      |      |
|    +---------------+      |
|                           |
+---------------------------+
```

### 3.2 主要模塊

- **路由模塊**: 管理頁面路由，實現導航功能
- **組件系統**: 提供UI構建塊，包含自定義MDX組件
- **內容管理**: 處理MDX文件的讀取與解析
- **主題系統**: 管理全站統一的視覺風格
- **SEO模塊**: 優化搜索引擎可見性與社交媒體分享

## 4. 頁面結構與路由設計

### 4.1 主要路由

| 路由 | 描述 | 頁面類型 |
|------|------|---------|
| `/` | 首頁 | 靜態頁面 |
| `/about` | 關於我 | 靜態頁面 |
| `/blog` | 文章列表 | 靜態生成+客戶端過濾 |
| `/blog/[slug]` | 文章詳情 | 靜態生成 |
| `/tags/[tag]` | 標籤頁面 | 靜態生成 |

### 4.2 檔案結構

```
app/
├── layout.tsx            # 根布局
├── page.tsx              # 首頁
├── about/
│   └── page.tsx          # 關於我頁面
├── blog/
│   ├── page.tsx          # 文章列表頁
│   └── [slug]/
│       └── page.tsx      # 文章詳情頁
├── tags/
│   └── [tag]/
│       └── page.tsx      # 標籤頁面
└── components/           # 共用組件
    ├── ui/               # UI基礎組件
    ├── layouts/          # 布局組件
    ├── mdx/              # MDX擴展組件
    └── blog/             # 博客相關組件
```

## 5. 組件系統設計

### 5.1 核心組件類別

- **布局組件**: 定義頁面結構
  - `NavBar`: 頂部導航欄
  - `Footer`: 頁腳
  - `Container`: 內容容器
  - `SideBar`: 側邊欄(可選)

- **UI組件**: 基礎視覺元素
  - `Button`: 按鈕
  - `Card`: 內容卡片
  - `Badge`: 標籤徽章
  - `Avatar`: 頭像

- **MDX增強組件**: 擴展Markdown功能
  - `CodeBlock`: 語法高亮代碼塊
  - `Callout`: 強調區塊
  - `ImageZoom`: 可放大圖片
  - `Tabs`: 標籤式內容區塊

- **部落格專用組件**:
  - `ArticleList`: 文章列表
  - `ArticleCard`: 文章卡片
  - `TableOfContents`: 目錄
  - `TagCloud`: 標籤雲
  - `RelatedPosts`: 相關文章

### 5.2 頁面布局設計

標準頁面布局結構：

```
+---------------------------+
|       Navigation Bar      |
+---------------------------+
|                           |
|      Main Content         |
|                           |
+---------------------------+
|         Footer            |
+---------------------------+
```

博客文章頁布局結構：

```
+---------------------------+
|       Navigation Bar      |
+---------------------------+
|        |                  |
| Table  |                  |
|   of   |  Article Content |
|Contents|                  |
|        |                  |
+---------------------------+
|      Related Posts        |
+---------------------------+
|         Footer            |
+---------------------------+
```

### 5.3 響應式設計策略

採用Tailwind CSS的響應式斷點設計：

- **默認**: 行動裝置 (< 768px)
  - 單列布局
  - 摺疊式導航
  - 優化觸控操作

- **md**: 平板裝置 (≥ 768px)
  - 雙列布局(文章+側邊欄)
  - 展開式導航
  - 更豐富的視覺效果

- **lg**: 桌面裝置 (≥ 1024px)
  - 最佳化雙列布局
  - 更完整的功能展示
  - 更大的字體與空間

## 6. 內容管理策略

### 6.1 MDX檔案結構

MDX文章將存儲在`content/`目錄中：

```
content/
├── blog/
│   ├── post-1.mdx
│   ├── post-2.mdx
│   └── ...
└── pages/
    └── about.mdx
```

### 6.2 MDX前置元數據

每篇MDX文章包含的前置元數據：

```yaml
---
title: "文章標題"
description: "簡短描述，用於SEO與預覽"
date: "2025-05-08"
tags: ["Next.js", "React", "Web開發"]
image: "/images/posts/cover-image.jpg"
published: true
featured: false
---
```

### 6.3 內容獲取流程

1. 使用`next-mdx-remote`或相似工具解析MDX文件
2. 通過靜態生成（SSG）預先渲染MDX內容
3. 使用自定義組件填充MDX中的組件標籤
4. 客戶端處理互動元素

## 7. 導航設計

### 7.1 主要導航

頂部導航欄將包含以下元素：
- **Logo/網站名稱**: 返回首頁
- **關於我**: 連結到關於頁面
- **我的文章**: 連結到文章列表頁
- **(可選)主題切換**: 明/暗模式切換
- **響應式選單按鈕**: 行動裝置上的導航選單

### 7.2 次要導航

- **頁腳導航**: 包含額外連結、社交媒體與版權資訊
- **文章內導航**: 目錄與章節跳轉
- **相關內容導航**: 相關文章與推薦閱讀

## 8. 測試策略

採用TDD方法，為每個組件和功能編寫測試：

### 8.1 測試層級

- **單元測試**: 測試獨立組件與工具函數
- **集成測試**: 測試組件間的互動
- **E2E測試**: 測試完整用戶流程

### 8.2 測試覆蓋範圍

- UI組件渲染正確性
- 響應式布局適配性
- 路由導航功能
- MDX渲染效果
- 用戶交互功能

## 9. 開發路線圖

### 9.1 第一階段 - 基礎架構

- 設置Next.js 15項目
- 配置Tailwind CSS
- 實現基礎布局與導航
- 建立MDX內容解析系統
- 開發核心UI組件

### 9.2 第二階段 - 核心功能

- 完善文章列表與詳情頁
- 實現標籤系統
- 開發MDX增強組件
- 實現響應式設計

### 9.3 第三階段 - 優化與擴展

- SEO優化
- 性能優化
- 添加搜索功能
- 開發更多互動元素

## 10. 結論

本架構設計提供了Clay個人部落格系統的整體框架，專注於簡潔的界面、優質的內容展示與良好的用戶體驗。透過Next.js 15與MDX的結合，我們能夠構建出一個現代化、高效能且易於維護的個人網站系統。